var app=angular.module("app",["ngRoute","ui.router","ngResource"]);app.config(["$stateProvider","$urlRouterProvider",function(t,e){"use strict";t.state("login",{url:"/",templateUrl:"states/login.html",data:{requireLogin:!1},controller:"LoginController"}).state("app",{"abstract":!0,data:{requireLogin:!0},template:"<div><div ui-view></div></div>"}).state("app.dashboard",{url:"/dashboard",templateUrl:"states/main.html",controller:"DashboardController"})}]),app.run(["$rootScope","$state",function(t,e){"use strict";t.$on("$stateChangeStart",function(r,o){var a=!1,n=void 0;void 0!=o.data&&(a=o.data.requireLogin,n=o.data.requirePermission),a===!0&&void 0===t.user&&(r.preventDefault(),e.transitionTo(o.name))})}]),app.factory("Login",["$resource",function(t){return t("http://localhost:8080/login?username=:username&password=:password")}]),app.factory("Session",["$rootScope",function(t){function e(t,e,r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);var a="expires="+o.toUTCString();document.cookie=t+"="+e+"; "+a}return{get:function(t){var e=document.cookie.split("; "),r=0,o=null;for(r;r<e.length;r++)if(o=e[r].split("="),o[0]===t)return o[1]},set:function(r){t.user=r,t.$broadcast("HeaderController:update",r),e("user_id",r.id,1)},unset:function(){t.user=void 0,e("user_id","val",0)},setLang:function(t){e("lang",t,20)}}}]);